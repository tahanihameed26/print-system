<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø·Ù„Ø¨ Ø·Ø¨Ø§Ø¹Ø©</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
html
{
    font-family: "Tajawal", "Cairo", sans-serif;

}
body{
  margin:0;
  font-family:"Tajawal",sans-serif;
  background: radial-gradient(circle at top right,#0f2c3f,#0b1d2a 60%);
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}


/* Ø®Ù„ÙÙŠØ© Ø¶Ø¨Ø§Ø¨ÙŠØ© */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(6px);
  display:flex;
  align-items:center;
  justify-content:center;
  overflow-y: auto;
}

/* Ø§Ù„ÙƒØ§Ø±Ø¯ */
.modal{
  background:linear-gradient(145deg,#ffffff,#f1f5f9);
  width:480px;
  max-width:95%;
  border-radius:32px;
  padding:30px 28px;
  box-shadow:
    0 30px 80px rgba(0,0,0,.45),
    inset 0 1px 0 rgba(255,255,255,.5);
  position:relative;
  animation:fadeIn .4s ease;
  max-height:90vh;
  overflow-y:auto;
}



@keyframes fadeIn{
  from{opacity:0; transform:translateY(20px)}
  to{opacity:1; transform:translateY(0)}
}

/* Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ */
.close{
  position:absolute;
  left:16px;
  top:12px;
  font-size:22px;
  cursor:pointer;
  color:#888;
  transition:.2s;
}
.close:hover{color:#000}

/* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
h2{
   font-family:"Tajawal",sans-serif;
  text-align:center;
  margin-bottom:18px;
  color:#0b1d2a;
  font-weight:700;
}

/* Ø§Ù„Ø­Ù‚ÙˆÙ„ */
.field{ margin-bottom:14px; }

input, select{
 font-family:"Tajawal",sans-serif;
  width:100%;
  padding:15px;
  border-radius:16px;
  border:1px solid #e2e8f0;
  font-size:14px;
  background:#f8fafc;
  transition:.25s ease;
}

input:hover, select:hover{
  background:#fff;
}

input:focus, select:focus{
  border-color:#d97706;
  box-shadow:0 0 0 4px rgba(217,119,6,.15);
  background:#fff;
}

/* Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù */
input[type="file"]{
  background:#f3f6f9;
  padding:10px;
}

/* Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
button{
   font-family:"Tajawal",sans-serif;
  width:100%;
  padding:18px;
  border:none;
  border-radius:20px;
  background:linear-gradient(135deg,#d97706,#b45309);
  color:#fff;
  font-size:16px;
  font-weight:700;
  margin-top:16px;
  cursor:pointer;
  transition:.3s ease;
}

button:hover{
  transform:translateY(-3px);
  box-shadow:0 15px 35px rgba(217,119,6,.4);
}


/* Ø±Ø³Ø§Ø¦Ù„ */
.error{
  color:#e11d48;
  font-size:13px;
  display:none;
  margin-top:4px;
}
.success-message{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(6px);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  visibility:hidden;
  transition:.3s ease;
  z-index:9999;
}

.success-message.show{
  opacity:1;
  visibility:visible;
}

.success-card{
  background:#fff;
  padding:40px 30px;
  border-radius:24px;
  text-align:center;
  width:320px;
  animation:pop .4s ease;
}

.success-check{
  width:70px;
  height:70px;
  background:linear-gradient(135deg,#10b981,#059669);
  color:#fff;
  font-size:32px;
  font-weight:bold;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0 auto 20px;
}

@keyframes pop{
  from{transform:scale(.8);opacity:0}
  to{transform:scale(1);opacity:1}
}

#priceBox{
  transition:all .3s ease;
  animation:fadeIn .3s ease;
}
 .progress-container{
  width:100%;
  height:6px;
  background:#e2e8f0;
  border-radius:10px;
  margin-bottom:12px;
  overflow:hidden;
}

.progress-bar{
  height:100%;
  width:25%;
  background:linear-gradient(90deg,#d97706,#f59e0b);
  transition:width .4s ease;
}

.steps{
  display:flex;
  justify-content:space-between;
  font-size:12px;
  margin-bottom:20px;
}

.step{
  opacity:.4;
  font-weight:600;
}

.step.active{
  opacity:1;
  color:#d97706;
}
.form-step{
  display:none;
  animation:fadeSlide .4s ease;
}

.form-step.active{
  display:block;
}

@keyframes fadeSlide{
  from{opacity:0; transform:translateX(20px);}
  to{opacity:1; transform:translateX(0);}
}

.summary-box{
  background:#f1f5f9;
  padding:14px;
  border-radius:16px;
  line-height:1.7;
  font-size:14px;
}
.step-buttons{
  display:flex;
  justify-content:space-between;
  gap:10px;
  margin-top:15px;
}

.step-buttons button{
  flex:1;
  padding:10px 14px;
  font-size:14px;
  border-radius:12px;
}

.submitBtn{
  background:linear-gradient(135deg,#d97706,#b45309);
  color:#fff;
  font-weight:bold;
}
.submitBtn{
  position:relative;
  background:linear-gradient(135deg,#d97706,#b45309);
  color:#fff;
  font-weight:bold;
  transition:0.3s;
}

.submitBtn:disabled{
  opacity:0.7;
  cursor:not-allowed;
}

.btn-loader{
  width:18px;
  height:18px;
  border:3px solid rgba(255,255,255,0.4);
  border-top:3px solid #fff;
  border-radius:50%;
  animation:spin 1ms linear infinite;
  margin:auto;
}

@keyframes spin{
  to{ transform:rotate(360deg); }
}
.summary-card{
  background:#f8fafc;
  padding:20px;
  border-radius:16px;
  border:1px solid #e2e8f0;
}

.summary-card table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

.summary-card td{
  padding:8px 6px;
  border-bottom:1px solid #eee;
}

.summary-card td:first-child{
  font-weight:600;
  color:#334155;
  width:45%;
}

.total-row td{
  font-weight:bold;
  color:#d97706;
  border-bottom:none;
  padding-top:14px;
}
.payment-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(6px);

  display:none;
  align-items:center;
  justify-content:center;

  z-index:9999;

  /* ğŸ‘‡ ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„ØªÙ…Ø±ÙŠØ± */
  overflow-y:auto;
  padding:40px 15px;
}

.payment-modal.show{
  display:flex;
}

/* Ø§Ù„ÙƒØ§Ø±Ø¯ */
.payment-card{
  background:#ffffff;
  width:420px;
  max-width:95%;

  padding:35px 30px;
  border-radius:24px;
  box-shadow:0 20px 60px rgba(0,0,0,.25);

  animation:fadeIn .3s ease;
  text-align:center;

  /* ğŸ‘‡ Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§ */
  max-height:90vh;
  overflow-y:auto;
}

/* Scroll Ø¬Ù…ÙŠÙ„ */
.payment-card::-webkit-scrollbar{
  width:6px;
}

.payment-card::-webkit-scrollbar-thumb{
  background:#d97706;
  border-radius:10px;
}


/* ===== Header ===== */
.payment-header{
  margin-bottom:25px;
}

.success-icon{
  width:70px;
  height:70px;
  background:linear-gradient(135deg,#10b981,#059669);
  color:#fff;
  font-size:32px;
  font-weight:bold;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0 auto 15px;
}

.payment-header h2{
  margin:0;
  font-size:20px;
  color:#0b1d2a;
}

.stage-text{
  font-size:14px;
  color:#64748b;
  margin-top:6px;
}
.pending-state{
  text-align:center;
}

.pending-icon{
  font-size:48px;
  margin-bottom:15px;
}

.pending-note{
  background:#f1f5f9;
  padding:12px;
  border-radius:12px;
  margin:15px 0;
  font-size:14px;
  color:#334155;
}

.pending-state button{
  padding:12px 20px;
  background:#0b1d2a;
  color:#fff;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

/* ===== Order Summary ===== */
.order-summary-box{
  background:#f8fafc;
  padding:15px;
  border-radius:14px;
  margin-bottom:20px;
}

.summary-row{
  display:flex;
  justify-content:space-between;
  margin:6px 0;
  font-size:14px;
}

/* ===== Wallet ===== */
.wallet-box{
  background:linear-gradient(135deg,#fff7ed,#ffedd5);
  padding:18px;
  border-radius:16px;
  margin-bottom:20px;
}

.wallet-title{
  font-weight:600;
  margin-bottom:8px;
}

.wallet-number{
  font-size:22px;
  font-weight:bold;
  letter-spacing:1px;
  color:#d97706;
  margin-bottom:6px;
}

/* ===== Inputs ===== */
.payment-fields input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #e2e8f0;
  margin-bottom:12px;
  font-family:inherit;
}

.payment-fields input:focus{
  outline:none;
  border-color:#d97706;
  box-shadow:0 0 0 3px rgba(217,119,6,.15);
}

/* ===== Button ===== */
.confirm-btn{
  width:100%;
  padding:14px;
  background:linear-gradient(135deg,#10b981,#059669);
  border:none;
  border-radius:14px;
  color:#fff;
  font-weight:bold;
  font-size:15px;
  cursor:pointer;
  transition:.25s;
}

.confirm-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(16,185,129,.4);
}

/* Animation */
@keyframes fadeIn{
  from{opacity:0; transform:scale(.95);}
  to{opacity:1; transform:scale(1);}
}


</style>
</head>

<body>

<div class="overlay">

  <div class="modal">
    <div class="close" onclick="location.reload()">Ã—</div>

    <h2>ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</h2>

<form id="orderForm">

<!-- ===== Progress ===== -->
<div class="progress-container">
  <div class="progress-bar" id="progressBar"></div>
</div>

<div class="steps">
  <span class="step active">ğŸ‘¤ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
  <span class="step">ğŸ–¨ Ø§Ù„ØªÙØ§ØµÙŠÙ„</span>
  <span class="step">ğŸ“ Ø§Ù„Ù…Ù„Ù</span>
  <span class="step">âœ… ØªØ£ÙƒÙŠØ¯</span>
</div>

<!-- ================= STEP 1 ================= -->
<div class="form-step active">

  <div class="field">
    <input type="text" name="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" required>
  </div>

  <div class="field">
    <input type="tel" id="phone" name="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
    <div class="error" id="phoneError">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­</div>
  </div>

  <button type="button" class="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- ================= STEP 2 ================= -->
<div class="form-step">

  <div class="field">
    <label>Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</label>
    <select id="productSelect">
      <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</option>
      <option value="ÙƒØ±ÙˆØª">Ø·Ø¨Ø§Ø¹Ø© ÙƒØ±ÙˆØª</option>
      <option value="ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚">ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚</option>
      <option value="Ø¨Ø±Ø´ÙˆØ±">Ø¨Ø±Ø´ÙˆØ±</option>
    </select>
  </div>

  <!-- ===== ÙƒØ±ÙˆØª ===== -->
  <div id="cardsSection" style="display:none;">
    <div class="field">
      <label>Ø§Ù„Ù…Ù‚Ø§Ø³</label>
      <select id="cardsSize">
        <option value="9Ã—5 Ø³Ù…">9Ã—5 Ø³Ù…</option>
        <option value="8Ã—5 Ø³Ù…">8Ã—5 Ø³Ù…</option>
        <option value="custom">Ù…Ø®ØµØµ</option>
      </select>
    </div>

    <div class="field" id="cardsCustomSize" style="display:none;">
      <input type="text" id="cardsCustomInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ø®ØµØµ">
    </div>

    <div class="field">
      <input type="number" id="cardsQty" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
    </div>

    <div class="field">
      <label>Ø§Ù„Ø³Ù„ÙØ§Ù†</label>
      <select id="cardsLamination">
        <option value="Ø¨Ø¯ÙˆÙ† Ø³Ù„ÙØ§Ù†">Ø¨Ø¯ÙˆÙ† Ø³Ù„ÙØ§Ù†</option>
        <option value="Ù…Ø³Ù„ÙÙ† ÙˆØ¬Ù‡ ÙˆØ§Ø­Ø¯">Ù…Ø³Ù„ÙÙ† ÙˆØ¬Ù‡ ÙˆØ§Ø­Ø¯</option>
        <option value="Ù…Ø³Ù„ÙÙ† ÙˆØ¬Ù‡ÙŠÙ†">Ù…Ø³Ù„ÙÙ† ÙˆØ¬Ù‡ÙŠÙ†</option>
      </select>
    </div>

    <div class="field" id="cardsFinishField" style="display:none;">
      <label>Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù†</label>
      <select id="cardsFinish">
        <option value="Ù„Ù…Ø¹">Ù„Ù…Ø¹</option>
        <option value="Ù…Ø·ÙÙŠ">Ù…Ø·ÙÙŠ</option>
      </select>
    </div>
  </div>

  <!-- ===== ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚ ===== -->
  <div id="stickerSection" style="display:none;">
    <div class="field">
      <label>Ø§Ù„Ù…Ù‚Ø§Ø³</label>
      <select id="stickerSize">
        <option value="A5">A5</option>
        <option value="A6">A6</option>
        <option value="custom">Ù…Ø®ØµØµ</option>
      </select>
    </div>

    <div class="field" id="stickerCustomSize" style="display:none;">
      <input type="text" id="stickerCustomInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ø®ØµØµ">
    </div>

    <div class="field">
      <input type="number" id="stickerQty" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
    </div>

    <div class="field">
      <label>Ø§Ù„Ø³Ù„ÙØ§Ù†</label>
      <select id="stickerLamination">
        <option value="Ø¨Ø¯ÙˆÙ† Ø³Ù„ÙØ§Ù†">Ø¨Ø¯ÙˆÙ† Ø³Ù„ÙØ§Ù†</option>
        <option value="Ù…Ø³Ù„ÙÙ†">Ù…Ø³Ù„ÙÙ†</option>
      </select>
    </div>

    <div class="field" id="stickerFinishField" style="display:none;">
      <label>Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù†</label>
      <select id="stickerFinish">
        <option value="Ù„Ù…Ø¹">Ù„Ù…Ø¹</option>
        <option value="Ù…Ø·ÙÙŠ">Ù…Ø·ÙÙŠ</option>
      </select>
    </div>
  </div>

  <!-- ===== Ø¨Ø±Ø´ÙˆØ± ===== -->
  <div id="brochureSection" style="display:none;">
    <div class="field">
      <label>Ø§Ù„Ù…Ù‚Ø§Ø³</label>
      <select id="brochureSize">
        <option value="A4">A4</option>
        <option value="A5">A5</option>
        <option value="custom">Ù…Ø®ØµØµ</option>
      </select>
    </div>

    <div class="field" id="brochureCustomSizeField" style="display:none;">
      <input type="text" id="brochureCustomSize" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ø®ØµØµ">
    </div>

    <div class="field">
      <input type="number" id="brochureQty" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
    </div>

    <div class="field">
      <label>Ø§Ù„Ø¬Ø±Ø§Ù…</label>
      <select id="brochureWeight">
        <option value="150g">150 Ø¬Ø±Ø§Ù…</option>
        <option value="200g">200 Ø¬Ø±Ø§Ù…</option>
        <option value="250g">250 Ø¬Ø±Ø§Ù…</option>
      </select>
    </div>

    <div class="field">
      <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆØ¬Ù‡</label>
      <select id="brochureFaces">
        <option value="ÙˆØ¬Ù‡ ÙˆØ§Ø­Ø¯">ÙˆØ¬Ù‡ ÙˆØ§Ø­Ø¯</option>
        <option value="ÙˆØ¬Ù‡ÙŠÙ†">ÙˆØ¬Ù‡ÙŠÙ†</option>
      </select>
    </div>

    <div class="field">
      <label>Ø§Ù„Ø³Ù„ÙØ§Ù†</label>
      <select id="brochureLamination">
        <option value="Ø¨Ø¯ÙˆÙ† Ø³Ù„ÙØ§Ù†">Ø¨Ø¯ÙˆÙ† Ø³Ù„ÙØ§Ù†</option>
        <option value="Ù…Ø³Ù„ÙÙ†">Ù…Ø³Ù„ÙÙ†</option>
      </select>
    </div>

    <div class="field" id="brochureFinishField" style="display:none;">
      <label>Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù†</label>
      <select id="brochureFinish">
        <option value="Ù„Ù…Ø¹">Ù„Ù…Ø¹</option>
        <option value="Ù…Ø·ÙÙŠ">Ù…Ø·ÙÙŠ</option>
      </select>
    </div>
  </div>

  <!-- Ø§Ù„Ø³Ø¹Ø± -->
  <div class="field" style="text-align:center;">
    <div id="priceBox" style="
      background:#f1f5f9;
      padding:14px;
      border-radius:14px;
      font-weight:bold;
      font-size:16px;
      display:none;">
      Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ: <span id="priceValue">0</span> Ø±ÙŠØ§Ù„
    </div>
  </div>
<div class="step-buttons">
  <button type="button" class="prevBtn">Ø±Ø¬ÙˆØ¹</button>
  <button type="button" class="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

</div>

<!-- ================= STEP 3 ================= -->
<div class="form-step">
  <div class="field">
    <input type="file" name="design" required>
  </div>
<div class="step-buttons">
  <button type="button" class="prevBtn">Ø±Ø¬ÙˆØ¹</button>
  <button type="button" class="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>
</div>

<!-- ================= STEP 4 ================= -->
<div class="form-step">
  <div id="orderSummary" class="summary-box"></div>
<div class="step-buttons">
  <button type="button" class="prevBtn">Ø±Ø¬ÙˆØ¹</button>
  <button type="submit" class="submitBtn" id="submitBtn">
  <span class="btn-text">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</span>
  <span class="btn-loader" style="display:none;"></span>
</button>
</div>
</div>
</form>
<div id="successMessage" class="success-message">
  <div class="success-card">
    <div class="success-check">âœ“</div>
    <h3>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­</h3>

  </div>
</div>

  </div>
</div>
<div id="paymentModal" class="payment-modal">

  <div class="payment-card">

    <!-- Ø±Ø£Ø³ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ -->
    <div class="payment-header">
      <div class="success-icon">âœ“</div>
      <h2>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­</h2>
      <p class="stage-text">Ø§Ù„Ø¢Ù† Ø£Ù†Øª ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯ÙØ¹ Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</p>
    </div>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨ -->
    <div class="order-summary-box">
      <div class="summary-row">
        <span>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</span>
        <strong id="paymentOrderId"></strong>
      </div>
      <div class="summary-row">
        <span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</span>
        <strong><span id="paymentAmount"></span> Ø±ÙŠØ§Ù„</strong>
      </div>
    </div>

    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø© -->
    <div class="wallet-box">
      <p class="wallet-title">Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¨ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù…</p>
      <div class="wallet-number">
        773713234
      </div>
      <small>ÙŠØ±Ø¬Ù‰ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø«Ù… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø£Ø¯Ù†Ø§Ù‡</small>
    </div>

    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹ -->
    <div class="payment-fields">
      <input type="text" id="transactionId" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      <input type="file" id="paymentProof" accept="image/*" required>
    </div>

    <button id="confirmPaymentBtn" class="confirm-btn">
      ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹
    </button>

  </div>
</div>


<script>
document.addEventListener("DOMContentLoaded", function() {

  /* ================= Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ================= */

  const form = document.getElementById("orderForm");
  const phoneInput = document.getElementById("phone");
  const phoneError = document.getElementById("phoneError");

  const productSelect = document.getElementById("productSelect");
  const cardsSection = document.getElementById("cardsSection");
  const stickerSection = document.getElementById("stickerSection");
  const brochureSection = document.getElementById("brochureSection");

  const priceBox = document.getElementById("priceBox");
  const priceValue = document.getElementById("priceValue");

  const steps = document.querySelectorAll(".form-step");
  const nextBtns = document.querySelectorAll(".nextBtn");
  const prevBtns = document.querySelectorAll(".prevBtn");
  const progressBar = document.getElementById("progressBar");
  const summaryBox = document.getElementById("orderSummary");
/* ===== Ù…Ù‚Ø§Ø³ Ù…Ø®ØµØµ Ù„Ù„ÙƒØ±ÙˆØª ===== */
const cardsSize = document.getElementById("cardsSize");
const cardsCustomSize = document.getElementById("cardsCustomSize");

if (cardsSize) {
  cardsSize.addEventListener("change", function () {
    cardsCustomSize.style.display =
      this.value === "custom" ? "block" : "none";
  });
}

/* ===== Ù…Ù‚Ø§Ø³ Ù…Ø®ØµØµ Ù„Ù„ÙƒØ±ÙˆØª Ø§Ù„Ù„Ø§ØµÙ‚ ===== */
const stickerSize = document.getElementById("stickerSize");
const stickerCustomSize = document.getElementById("stickerCustomSize");

if (stickerSize) {
  stickerSize.addEventListener("change", function () {
    stickerCustomSize.style.display =
      this.value === "custom" ? "block" : "none";
  });
}

/* ===== Ù…Ù‚Ø§Ø³ Ù…Ø®ØµØµ Ù„Ù„Ø¨Ø±Ø´ÙˆØ± ===== */
const brochureSize = document.getElementById("brochureSize");
const brochureCustomSizeField = document.getElementById("brochureCustomSizeField");

if (brochureSize) {
  brochureSize.addEventListener("change", function () {
    brochureCustomSizeField.style.display =
      this.value === "custom" ? "block" : "none";
  });
}

  let currentStep = 0;

  /* ================= Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª ================= */

  function showStep(index){
    steps.forEach((step,i)=>{
      step.classList.toggle("active", i === index);
    });

    if(progressBar){
      progressBar.style.width = ((index+1)/steps.length)*100 + "%";
    }

    if(index === 3){
      generateSummary();
    }
  }

nextBtns.forEach(btn=>{
  btn.addEventListener("click", ()=>{

    /* ===== STEP 1 ØªØ­Ù‚Ù‚ ===== */
    if(currentStep === 0){

      if(!form.name.value.trim()){
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…");
        return;
      }

      if(!validPhone(phoneInput.value)){
        phoneError.style.display = "block";
        return;
      }

      phoneError.style.display = "none";
    }

    /* ===== STEP 2 ØªØ­Ù‚Ù‚ ===== */
    if(currentStep === 1){

      if(!productSelect.value){
        alert("Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©");
        return;
      }

      if(priceValue.textContent == "0" || priceValue.textContent == ""){
        alert("Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±");
        return;
      }
    }

    /* ===== STEP 3 ØªØ­Ù‚Ù‚ ===== */
    if(currentStep === 2){
      const fileInput = form.querySelector("input[type='file']");
      if(!fileInput.files.length){
        alert("ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„ØªØµÙ…ÙŠÙ…");
        return;
      }
    }

    currentStep++;
    showStep(currentStep);
  });
});

  prevBtns.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      if(currentStep > 0){
        currentStep--;
        showStep(currentStep);
      }
    });
  });

  /* ================= Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªØ¬ ================= */

  productSelect?.addEventListener("change", function(){

    cardsSection.style.display = "none";
    stickerSection.style.display = "none";
    brochureSection.style.display = "none";

    if(this.value === "ÙƒØ±ÙˆØª"){
      cardsSection.style.display = "block";
    }
    if(this.value === "ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚"){
      stickerSection.style.display = "block";
    }
    if(this.value === "Ø¨Ø±Ø´ÙˆØ±"){
      brochureSection.style.display = "block";
    }

    calculatePrice();
  });

  /* ================= Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± ================= */

  function calculatePrice(){

    let price = 0;
    const product = productSelect.value;

    if(product === "ÙƒØ±ÙˆØª"){
      const qty = parseInt(document.getElementById("cardsQty")?.value || 0);
      if(qty >= 1000) price = qty * 0.02;
      else if(qty >= 500) price = qty * 0.025;
      else price = qty * 0.03;

      const lam = document.getElementById("cardsLamination")?.value || "";
      if(lam.includes("Ù…Ø³Ù„ÙÙ†")){
        price += qty * 0.005;
      }
    }

    if(product === "ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚"){
      const qty = parseInt(document.getElementById("stickerQty")?.value || 0);
      price = qty * 0.035;

      const lam = document.getElementById("stickerLamination")?.value || "";
      if(lam === "Ù…Ø³Ù„ÙÙ†"){
        price += qty * 0.005;
      }
    }

    if(product === "Ø¨Ø±Ø´ÙˆØ±"){
      const qty = parseInt(document.getElementById("brochureQty")?.value || 0);
      const weight = document.getElementById("brochureWeight")?.value || "";

      if(weight === "150g") price = qty * 0.05;
      if(weight === "200g") price = qty * 0.06;
      if(weight === "250g") price = qty * 0.07;

      const lam = document.getElementById("brochureLamination")?.value || "";
      if(lam === "Ù…Ø³Ù„ÙÙ†"){
        price += qty * 0.01;
      }
    }

    if(price > 0){
      priceBox.style.display = "block";
      priceValue.textContent = price.toFixed(2);
    } else {
      priceBox.style.display = "none";
    }
  }

  /* ================= ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ± ================= */

  document.addEventListener("input", function(e){
    if(e.target.matches("input, select")){
      calculatePrice();
    }
  });

  /* ================= Ø¥Ø¸Ù‡Ø§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù† ================= */

  function laminationLogic(selectId, finishFieldId){
    const select = document.getElementById(selectId);
    const finishField = document.getElementById(finishFieldId);

    if(select && finishField){
      select.addEventListener("change", function(){
        finishField.style.display =
          this.value.includes("Ù…Ø³Ù„ÙÙ†") ? "block" : "none";
      });
    }
  }

  laminationLogic("cardsLamination", "cardsFinishField");
  laminationLogic("stickerLamination", "stickerFinishField");
  laminationLogic("brochureLamination", "brochureFinishField");

  /* ================= ØªØ­Ù‚Ù‚ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ================= */

  function validPhone(phone){
    return /^(77|78|70|71|73)\d{7}$/.test(phone);
  }

  /* ================= Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨ ================= */
function generateSummary(){

  const name = form.name.value;
  const phone = phoneInput.value;
  const product = productSelect.value;
  const price = priceValue.textContent;

  let detailsHTML = "";

  if(product === "ÙƒØ±ÙˆØª"){
    detailsHTML += `
      <tr><td>Ø§Ù„Ù…Ù‚Ø§Ø³</td><td>${document.getElementById("cardsSize").value}</td></tr>
      <tr><td>Ø§Ù„ÙƒÙ…ÙŠØ©</td><td>${document.getElementById("cardsQty").value}</td></tr>
      <tr><td>Ø§Ù„Ø³Ù„ÙØ§Ù†</td><td>${document.getElementById("cardsLamination").value}</td></tr>
    `;

   const lamination = document.getElementById("cardsLamination").value;

if(lamination.includes("Ù…Ø³Ù„ÙÙ†")){
  const finish = document.getElementById("cardsFinish")?.value;
  detailsHTML += `<tr><td>Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù†</td><td>${finish}</td></tr>`;
}

  }

  if(product === "ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚"){
    detailsHTML += `
      <tr><td>Ø§Ù„Ù…Ù‚Ø§Ø³</td><td>${document.getElementById("stickerSize").value}</td></tr>
      <tr><td>Ø§Ù„ÙƒÙ…ÙŠØ©</td><td>${document.getElementById("stickerQty").value}</td></tr>
      <tr><td>Ø§Ù„Ø³Ù„ÙØ§Ù†</td><td>${document.getElementById("stickerLamination").value}</td></tr>
    `;
const lamination = document.getElementById("stickerLamination").value;

if(lamination === "Ù…Ø³Ù„ÙÙ†"){
  const finish = document.getElementById("stickerFinish")?.value;
  detailsHTML += `<tr><td>Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù†</td><td>${finish}</td></tr>`;
}

  }

  if(product === "Ø¨Ø±Ø´ÙˆØ±"){
    detailsHTML += `
      <tr><td>Ø§Ù„Ù…Ù‚Ø§Ø³</td><td>${document.getElementById("brochureSize").value}</td></tr>
      <tr><td>Ø§Ù„ÙƒÙ…ÙŠØ©</td><td>${document.getElementById("brochureQty").value}</td></tr>
      <tr><td>Ø§Ù„Ø¬Ø±Ø§Ù…</td><td>${document.getElementById("brochureWeight").value}</td></tr>
      <tr><td>Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆØ¬Ù‡</td><td>${document.getElementById("brochureFaces").value}</td></tr>
      <tr><td>Ø§Ù„Ø³Ù„ÙØ§Ù†</td><td>${document.getElementById("brochureLamination").value}</td></tr>
    `;

  const lamination = document.getElementById("brochureLamination").value;

if(lamination === "Ù…Ø³Ù„ÙÙ†"){
  const finish = document.getElementById("brochureFinish")?.value;
  detailsHTML += `<tr><td>Ù†ÙˆØ¹ Ø§Ù„Ø³Ù„ÙØ§Ù†</td><td>${finish}</td></tr>`;
}

}

  summaryBox.innerHTML = `
    <div class="summary-card">
      <table>
        <tr><td>Ø§Ù„Ø§Ø³Ù…</td><td>${name}</td></tr>
        <tr><td>Ø§Ù„Ù‡Ø§ØªÙ</td><td>${phone}</td></tr>
        <tr><td>Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</td><td>${product}</td></tr>
        ${detailsHTML}
        <tr class="total-row"><td>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ</td><td>${price} Ø±ÙŠØ§Ù„</td></tr>
      </table>
    </div>
  `;
}


  /* ================= Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ================= */

 let isSubmitting = false;

form.addEventListener("submit", async function(e){
  e.preventDefault();

  if(isSubmitting) return; // ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ØªÙƒØ±Ø±

  if(!validPhone(phoneInput.value)){
    phoneError.style.display = "block";
    return;
  }

  phoneError.style.display = "none";

  const submitBtn = document.getElementById("submitBtn");
  const btnText = submitBtn.querySelector(".btn-text");
  const btnLoader = submitBtn.querySelector(".btn-loader");

  // ğŸ”’ Ù‚ÙÙ„ Ø§Ù„Ø²Ø±
  isSubmitting = true;
  submitBtn.disabled = true;
  btnText.style.display = "none";
  btnLoader.style.display = "inline-block";


  let formData = {
    name: form.name.value,
    phone: phoneInput.value,
    product: productSelect.value,
    size: null,
    quantity: null,
    lamination: null,
    finish: null,
    weight: null,
    faces: null,
    price: parseFloat(priceValue.textContent) || 0
  };

  /* ===== ÙƒØ±ÙˆØª ===== */
  if(productSelect.value === "ÙƒØ±ÙˆØª"){
    const sizeValue = cardsSize.value === "custom"
      ? document.getElementById("cardsCustomInput").value
      : cardsSize.value;

    formData.size = sizeValue;
    formData.quantity = parseInt(document.getElementById("cardsQty")?.value) || 0;
    formData.lamination = document.getElementById("cardsLamination")?.value || "";
    formData.finish = document.getElementById("cardsFinish")?.value || "";
  }

  /* ===== ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚ ===== */
  if(productSelect.value === "ÙƒØ±ÙˆØª Ù„Ø§ØµÙ‚"){
    const stickerSize = document.getElementById("stickerSize");
    const sizeValue = stickerSize.value === "custom"
      ? document.getElementById("stickerCustomInput").value
      : stickerSize.value;

    formData.size = sizeValue;
    formData.quantity = parseInt(document.getElementById("stickerQty")?.value) || 0;
    formData.lamination = document.getElementById("stickerLamination")?.value || "";
    formData.finish = document.getElementById("stickerFinish")?.value || "";
  }

  /* ===== Ø¨Ø±Ø´ÙˆØ± ===== */
  if(productSelect.value === "Ø¨Ø±Ø´ÙˆØ±"){
    const brochureSize = document.getElementById("brochureSize");
    const sizeValue = brochureSize.value === "custom"
      ? document.getElementById("brochureCustomSize").value
      : brochureSize.value;

    formData.size = sizeValue;
    formData.quantity = parseInt(document.getElementById("brochureQty")?.value) || 0;
    formData.weight = document.getElementById("brochureWeight")?.value || "";
    formData.faces = document.getElementById("brochureFaces")?.value || "";
    formData.lamination = document.getElementById("brochureLamination")?.value || "";
    formData.finish = document.getElementById("brochureFinish")?.value || "";
  }

  try {
    const response = await fetch("https://print-system.onrender.com/api/orders", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify(formData)
    });

    if(!response.ok){
      throw new Error("ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    }
const result = await response.json();
// const successBox = document.getElementById("successMessage");

// successBox.classList.add("show");
document.getElementById("paymentOrderId").textContent = result.orderId;
document.getElementById("paymentAmount").textContent = formData.price;

document.getElementById("paymentModal").classList.add("show");

// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
setTimeout(() => {
  successBox.classList.remove("show");
  form.reset();
  priceBox.style.display = "none";
  currentStep = 0;
  showStep(0);
}, 3000);

  } catch(err){
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
  }

  // ğŸ”“ ÙØªØ­ Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
  isSubmitting = false;
  submitBtn.disabled = false;
  btnText.style.display = "inline";
  btnLoader.style.display = "none";
});
document.getElementById("confirmPaymentBtn")
.addEventListener("click", async function(){

  const btn = this;
  btn.disabled = true;
  btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

  const transactionId = document.getElementById("transactionId").value;
  const orderId = document.getElementById("paymentOrderId").textContent;
  const amount = document.getElementById("paymentAmount").textContent;

  try {

    const response = await fetch("https://print-system.onrender.com/api/payments", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({
        orderId,
        transactionId,
        amount
      })
    });

    if(!response.ok){
      throw new Error();
    }

    showPaymentPendingState(); // ğŸ‘ˆ Ù‡Ù†Ø§ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

  } catch(err){
    btn.disabled = false;
    btn.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹";
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹");
  }

});
function closePaymentModal(){
  document.getElementById("paymentModal").classList.remove("show");
  document.body.style.overflow = "auto";
}

function showPaymentPendingState(){

  const card = document.querySelector(".payment-card");

  card.innerHTML = `
    <div class="pending-state">

      <div class="pending-icon">â³</div>

      <h2>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙØ¹</h2>

      <p>
        Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù†Ù‡Ø§.
      </p>

      <div class="pending-note">
        Ø¨Ù…Ø¬Ø±Ø¯ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ø¨Ù„Øº Ø³ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ø¨Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³ Ø§Ø¨ âœ”
      </div>

      <button onclick="closePaymentModal()">Ø­Ø³Ù†Ù‹Ø§</button>

    </div>
  `;
}

});
</script>

</body>
</html>
